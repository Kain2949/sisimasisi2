/* ================================
   Base
   ================================ */
:root{
  --bg: #070b12;
  --ink: #eaf0ff;
  --muted:#9fb0c7;

  --radius: 18px;
  --shadow: 0 18px 40px rgba(0,0,0,.55);
  --border-soft: 1px solid rgba(255,255,255,.16);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: radial-gradient(1200px 700px at 50% -10%, #0e1522, #070b12);
  color:var(--ink);
  font:16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, Arial;
}
.hidden{display:none !important}
button{font:inherit}

/* ================================
   Layout
   ================================ */
#app{max-width:1200px;margin:24px auto;padding:0 16px}
.stage{display:grid;grid-template-columns:1fr 420px;gap:24px;transition:transform .28s ease,filter .28s ease,opacity .28s ease}
body.looking-down #stage{transform:translateY(-15vh);filter:blur(5px) brightness(.9)}

/* ================================
   Glass material
   ================================ */
.glass{position:relative;background:transparent;border-radius:var(--radius);box-shadow:var(--shadow);isolation:isolate}
.glass::before{
  content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.14),
    inset 0 8px 22px rgba(255,255,255,.22),
    inset 0 -10px 24px rgba(0,0,0,.38);
}
.glass::after{
  content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;
  background: linear-gradient(to bottom, rgba(255,255,255,.28), rgba(255,255,255,0) 32%);
  mask: radial-gradient(120% 60% at 50% -20%, #000 45%, transparent 55%);
  mix-blend-mode: screen; opacity:.55;
}

/* Линзовый слой — отдельный элемент, чтобы текст не искажался */
.glass__lens{
  position:absolute;inset:0;border-radius:inherit;pointer-events:none;z-index:0;
  filter:url(#glass-distortion);
  background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
  backdrop-filter: blur(6px) saturate(120%); -webkit-backdrop-filter: blur(6px) saturate(120%);
  border: 1px solid rgba(255,255,255,.14);
}
.glass--panel{border-radius:22px}
.glass--btn{border-radius:999px}
.glass--hud{border-radius:16px}
.glass--input{border-radius:12px}

/* ================================
   Cards & Scene
   ================================ */
.pane .card{position:relative;overflow:hidden}
#desc{min-height:520px;display:flex;flex-direction:column}
#bgImg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center;filter:brightness(.62) contrast(1.06) saturate(.95);pointer-events:none}
#desc .text{position:relative;padding:24px 26px 28px;font-size:18px;min-height:160px;text-shadow:0 1px 2px rgba(0,0,0,.8)}

.stack{display:flex;flex-direction:column;gap:12px;padding:16px}
.option{appearance:none;border:0;cursor:pointer;padding:18px 20px;text-align:left;color:var(--ink);border-radius:14px;background:transparent}
.option:hover{transform:translateY(-1px)}

/* ================================
   HUD
   ================================ */
.hudbar{position:absolute;left:16px;right:16px;bottom:16px;display:flex;align-items:center;gap:12px;padding:10px 12px;border:var(--border-soft)}
.timer{margin-right:auto;padding:6px 10px;border-radius:999px;border:var(--border-soft);background:rgba(10,16,28,.35);color:#d5e1ff;font-size:13px}
.hud-menu{width:36px;height:36px;display:grid;place-items:center;border:0;cursor:pointer}

/* ================================
   Boot
   ================================ */
.boot{position:fixed;inset:0;display:grid;place-items:center;background:var(--bg);z-index:10000}
.boot-box{padding:22px}
.boot-title{font-weight:700;margin-bottom:12px}
.boot-progress{height:10px;background:#0a101b;border-radius:999px;overflow:hidden;margin:10px 0}
.boot-progress>#bootBar{height:100%;width:0%;background:linear-gradient(90deg,#dfe9ff,#8fb7ff);transition:width .15s ease}
.boot-meta{display:flex;gap:8px;font-size:13px;color:var(--muted)}
body.ready .boot{display:none}

/* ================================
   Overlays & Panels
   ================================ */
.overlay{position:fixed;inset:0;display:grid;place-items:center;background:rgba(6,8,12,.72);z-index:10001}
.panel{width:min(700px,96vw);padding:26px 24px 28px;border:var(--border-soft)}
.panel.main{height:100vh;border-radius:0;display:flex;flex-direction:column;justify-content:center;gap:16px}
.menu-col{display:grid;gap:16px}
.cta{width:100%;padding:20px 24px;font-size:22px;font-weight:800;color:var(--ink);cursor:pointer;border:0;background:transparent}
.cta.ghost{font-weight:600;opacity:.95}
.menu-bottom{margin-top:auto;display:flex;justify-content:flex-end;gap:16px;padding-bottom:10px}
.round{width:56px;height:56px;display:grid;place-items:center;border:0;cursor:pointer}

.form{display:grid;gap:12px}
label{display:grid;gap:6px;font-size:14px;color:#c8d1e3}
input{appearance:none;outline:none;border:var(--border-soft);background:rgba(8,12,20,.3);color:var(--ink);padding:12px 12px;width:100%}
.pill-row{display:flex;gap:10px}
.pill{padding:10px 14px;border:0;cursor:pointer;background:transparent}
.pill.active{box-shadow:inset 0 0 0 2px rgba(255,255,255,.45)}
.dual{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px}
.btn{appearance:none;border:0;padding:12px 14px;cursor:pointer;color:var(--ink);background:transparent;position:relative}
.btn.quiet{opacity:.9}
.btn.warn::before{content:"";position:absolute;inset:0;border-radius:inherit;box-shadow:inset 0 -6px 24px rgba(255,170,40,.35)}
.muted{color:var(--muted);font-size:13px}

.lb-list{display:grid;gap:10px;margin-top:8px}
.lb-list .row{display:grid;grid-template-columns:44px 1fr 1fr 90px;gap:8px;align-items:center;padding:10px 12px;border:var(--border-soft);border-radius:14px}
.lb-list .pos{text-align:center;font-weight:700;color:#cfe0ff}
.lb-list .time{text-align:right;color:#e7eeff}

/* Диалоги */
dialog{border:0;padding:0}
dialog .dlg-body{padding:20px 22px 12px;min-width:300px;max-width:92vw;max-height:72vh;overflow:auto}
dialog .close{position:absolute;right:10px;top:10px;width:32px;height:32px;display:grid;place-items:center;border:0;cursor:pointer}
.close-fixed{right:14px;top:14px}

/* Веки */
.eyelid{position:fixed;left:0;right:0;height:0;background:#000;z-index:9999;transition:height .18s ease;pointer-events:none}
.eyelid.top{top:0}.eyelid.bot{bottom:0}

/* ================================
   Marquee: винтажная вывеска
   ================================ */
.marquee{display:flex;justify-content:center;align-items:center;margin-top:-18px;margin-bottom:8px}
#rafLogo{width:min(900px,90vw);height:auto}
.metal{fill:none;stroke:rgba(50,50,55,.92);stroke-width:18;filter:drop-shadow(0 2px 0 rgba(255,255,255,.14)) drop-shadow(0 12px 20px rgba(0,0,0,.6))}
.bulb{fill:url(#bulbRad);stroke:#6a4b19;stroke-width:1.2;filter:url(#bulbGlow);transform-origin:center;animation:microflicker 2.6s ease-in-out infinite;animation-delay:calc(var(--i,0)*.07s)}
@keyframes microflicker{0%,100%{opacity:.98}45%{opacity:.92}50%{opacity:1}55%{opacity:.94}}
.bulb.dead{opacity:.18;filter:brightness(.35)}

/* ================================
   Responsive
   ================================ */
@media (max-width:980px){
  .stage{grid-template-columns:1fr}
  .dual{grid-template-columns:1fr}
  .panel.main{height:auto;padding-top:32px;padding-bottom:32px}
}
